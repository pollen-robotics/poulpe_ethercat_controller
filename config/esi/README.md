# Ethercat ESI configuration files

This directory contains the Ethercat Slave Information (ESI) files for the Ethercat slaves used in the project. The ESI files are used by the Ethercat master to configure the slaves. The ESI files are generated by the slave manufacturers and are specific to each slave.

This directory contains:
- XML ESI files for generic orbita2d/orbita3d (`OrbitaXd.xml`)
- compiled ESI files for generic orbita2d/orbita3d (`OrbitaXd.bin`)
- `reachy2` robot directory - [reachy2/README.md](reachy2/README)
    - XML/bin ESI files for all joints
    - XML/bin ESI file generation scripts
    - seaprated per firmware version



## Orbita Poulpe configuration - Flushing the EEPROM

The Orbita poulpe stores tpe slaves have an EEPROM thathe configuration. If the EEPROM is not properly configured, the slaves will not work. To flush the EEPROM first we need to convert the ESI file to a binary file. This can be done using the `siitool` tool. 

If the board is not configured, once connected to the ethercat network, you it will not display its proper name when you run `ethercat slave`

```sh
$ ethercat slave
0  0:0  OP  +  00000000:00000000
```

If you have the binary file, you can use the `ethercat` tool to flash the EEPROM. 

```bash
ethercat sii_write -p0 Orbita2d.bin # may need sudo
```

> If there is an error in the transfer try disconnecting and reconnecting the the ethernet cable.

**Make sure to restart the board after this (diconnect the power)**

Make sure to put the proper slave index `p0` is for slate 0, `p1` for slave 1, etc.
Also make sure to use the proper binary file, `Orbita2d.bin` for orbita2d and `Orbita3d.bin` for orbita3d.


Then you should have the proper name of the device. 
```sh
$ ethercat slave
0  0:0  OP  +  Orbita2d
```